---
import Particles from "astro-particles";
import themes from "@data/background.json"; // Import the JSON file
import type { ISourceOptions } from "tsparticles-engine";


const { theme } = Astro.props; // Theme name passed as a prop
//@ts-ignore
const selectedTheme = themes[theme] || themes.catppuccinMacchiato; // Default to Nord if theme not found

const options: ISourceOptions = {
  background: {
    color: selectedTheme.colors.background,
  },
  fullScreen: {
    zIndex: selectedTheme.settings.zIndex,
  },
  particles: {
    number: {
      value: selectedTheme.settings.particlesNumber,
    },
    move: {
      enable: true,
    },
    opacity: {
      value: selectedTheme.settings.opacity,
    },
    size: {
      value: selectedTheme.settings.particleSize,
    },
    light: {
      area: {
        gradient: {
          start: selectedTheme.colors.lightGradientStart,
          stop: selectedTheme.colors.lightGradientStop,
        },
        radius: selectedTheme.settings.lightRadius,
      },
    },
    shadow: {
      enable: true,
      color: selectedTheme.colors.shadowColor,
      blur: 10,
    },
  },
};
---

<script>
  import type { Engine } from "tsparticles-engine";
  import { loadSlim } from "tsparticles-slim";

  window.particlesInit = async function (engine: Engine) {
    await loadSlim(engine);
  };
</script>

<Particles id="tsparticles" options={options} init="particlesInit" />
